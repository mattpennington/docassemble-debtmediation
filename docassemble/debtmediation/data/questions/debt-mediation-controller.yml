mandatory: True
code: |
  #set the interview as multi user (https://docassemble.org/docs/special.html#multi_user)
  multi_user = True
  role = 'organizer'
  if intro_screen_mediator and applicant.mobile_number and debtor.mobile_number:
    if user_logged_in():
      if user_info().email == applicant.email:
        role = 'applicant'
      elif user_info().email == debtor.email:
        role = 'debtor'
---
event: role_event
question: Awaiting Information
subquestion: |
  % if not user_logged_in():
  If you were invited to participate in the mediation process, please click "Sign in."
  % else:
    % if role == 'organizer':
      % if 'applicant' in role_needed:
      We are waiting for information from the applicant and the debtor
      % elif 'debtor' in role_needed:
      We are now waiting for information from the debtor
      % endif
    % elif role == 'applicant':
      Thank you for your assistance We are awaiting information from the debtor
    % endif
  % endif

  Press **Check** to refresh the status of this interview.
buttons:
  - Check: refresh
---
objects:
  - applicant: Individual
  - debtor: Individual
---
#we are using this code block to control the flow of the interview between the various parties
mandatory: True
code: |
  # mediator questions
  # show the mediator an intro screen
  intro_screen_mediator
  # capture the information about the applicant and the debtor
  applicant.mobile_number
  debtor.mobile_number

  applicant.invitation_sent

  # applicant questions
  intro_screen_applicant
  applicant.debt_amount
  applicant.debt_months
  applicant.debt_overview
  applicant.debt_proposals

  debtor.invitation_sent

  # debtor questions
  intro_screen_debtor
  debtor.debt_overview
  debtor.debt_proposals

  #update the mediator
  mediation_overview_email
---
# create a final screen for all participants
mandatory: True
role:
  - organizer
  - applicant
  - debtor
question: Interview Completed
subquestion: This interview is completed.